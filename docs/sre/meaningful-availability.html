<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Meaningful Availability · Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="[Link to Article](https://www.usenix.org/system/files/nsdi20spring_hauer_prepub.pdf)  "/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Meaningful Availability · Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://gregschullo.github.io/documentation/index.html"/><meta property="og:description" content="[Link to Article](https://www.usenix.org/system/files/nsdi20spring_hauer_prepub.pdf)  "/><meta property="og:image" content="https://gregschullo.github.io/documentation/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://gregschullo.github.io/documentation/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/documentation/img/book.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://gregschullo.github.io/documentation/blog/atom.xml" title="Documentation Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://gregschullo.github.io/documentation/blog/feed.xml" title="Documentation Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/documentation/js/scrollSpy.js"></script><link rel="stylesheet" href="/documentation/css/main.css"/><script src="/documentation/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/documentation/"><img class="logo" src="/documentation/img/book.png" alt="Documentation"/><h2 class="headerTitleWithLogo">Documentation</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/documentation/docs/development/development-index.html" target="_self">Development</a></li><li class=""><a href="/documentation/docs/networking/osi-model.html" target="_self">Networking</a></li><li class=""><a href="/documentation/docs/dashboarding/grafana-index.html" target="_self">Dashboarding</a></li><li class=""><a href="/documentation/docs/monitoring/prometheus-index.html" target="_self">Monitoring</a></li><li class=""><a href="/documentation/docs/container-platforms/kubernetes-index.html" target="_self">Containerization Platforms</a></li><li class="siteNavGroupActive"><a href="/documentation/docs/sre/sre-index.html" target="_self">SRE</a></li><li class=""><a href="/documentation/docs/books/phoenix-project.html" target="_self">Books</a></li><li class=""><a href="/documentation/blog/" target="_self">Blog</a></li><li class=""><a href="/documentation/help.html" target="_self">Help</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>SRE</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">SRE</h3><ul class=""><li class="navListItem"><a class="navItem" href="/documentation/docs/sre/sre-index.html">SRE</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/documentation/docs/sre/meaningful-availability.html">Meaningful Availability</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/sre/new-relic-sre.html">New Relic SRE</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Meaningful Availability</h1></header><article><div><span><p><a href="https://www.usenix.org/system/files/nsdi20spring_hauer_prepub.pdf">Link to Article</a></p>
<h2><a class="anchor" aria-hidden="true" id="abstract"></a><a href="#abstract" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Abstract</h2>
<p>High availability is critical for applications because without it, users cannot rely on it for important work.</p>
<h2><a class="anchor" aria-hidden="true" id="related-work"></a><a href="#related-work" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Related Work</h2>
<p>Three desirable properties of an availability metric: meaningful, proportional, and actionable.</p>
<h2><a class="anchor" aria-hidden="true" id="motivation"></a><a href="#motivation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Motivation</h2>
<p>Availability is the ability of a service to perform its required function at an agreed instant or over an agreed period of time. At a high level, all availability metrics have the following form:</p>
<p>availability = good service / total demanded service</p>
<p>Availability metrics are valuable for users because they tell them whether or not a service is suitable for their use case.<br>
Availability metrics are valuable for developers because they help prioritize their work to improve the system.</p>
<p>Proportional metrics enable developers to quantify the benefit of an incremental improvement.<br>
Actionable metrics enable developers to zero in on episodes of worst availability and find problems that need addressing.</p>
<h3><a class="anchor" aria-hidden="true" id="time-based-availability-metrics"></a><a href="#time-based-availability-metrics" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Time based availability metrics</h3>
<p>availability = MTTF / (MTTF + MTTR)<br>
Where MTTF = mean-time-to-failure and MTTR = mean-time-to-recovery</p>
<p>This measure is based on the duration of the system being up or down.</p>
<p>uptime = good service<br>
downtime = bad service</p>
<p>availability = uptime / (uptime + downtime)</p>
<p>Commonly used time-based availability metrics:</p>
<ol>
<li>Are not proportional to the severity of the system's unavailability (a downtime with 100% failure rate weighs the same as one with 10% failure rate)</li>
<li>Are not proportional to the number of affected users (a downtime at night has the same weight as downtime during a peak period)</li>
<li>Are not actionable because they do not, in themselves, provide developers guidance into the sources of failures</li>
<li>Are not meaningful in they rely on arbitrary thresholds or manual judgments</li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="count-based-availability-metrics"></a><a href="#count-based-availability-metrics" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Count-based availability metrics</h3>
<p>Success ratio is the ratio of successful requests to total requests. Since success-ratio does not use a threshold, it is more proportional than commonly used time-based metrics.</p>
<p>Success ratio is as an availability measure is popular because it is easy to implement and is a reasonable measure.</p>
<p>Count-based (success-ratio) availability metrics:</p>
<ol>
<li>Are not meaningful in they are not based on time</li>
<li>Are biased by highly active users</li>
<li>Are biased because of different client behavior during outages</li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="probes"></a><a href="#probes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Probes</h3>
<p>Synthetic probes may mitigate some of the shortcomings of success-ratio.</p>
<p>A metric which uses synthetic probes may not be representative of real-user experience</p>
<p>Availability metrics based on synthetic probes:</p>
<ol>
<li>Are not representative of user activity</li>
<li>Are not proportional to what users experience</li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="actionable-metrics"></a><a href="#actionable-metrics" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Actionable metrics</h3>
<p>Availability metrics mentioned above represent different points in the tradeoffs between proportional and meaningful. They all have a similar weakness though: actionable. A single number with a reporting period does not allow enough insight into the source or shape of unavailability.</p>
<h2><a class="anchor" aria-hidden="true" id="proportional-and-meaningful-availability-user-uptime"></a><a href="#proportional-and-meaningful-availability-user-uptime" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Proportional and Meaningful Availability: User-Uptime</h2>
<p>As discussed, prior metrics mentioned for availability are not meaningful or proportional. This equation satisfies both proportionality and meaningfulness:</p>
<p>user-uptime = <a href="https://en.wikipedia.org/wiki/Summation">summation</a> uptime per user / <a href="https://en.wikipedia.org/wiki/Summation">summation</a> (uptime per user + downtime per user)</p>
<p>The calculation of this metric is not straightforward as it requires the definition of uptime and downtime per user.</p>
<h3><a class="anchor" aria-hidden="true" id="events-and-durations"></a><a href="#events-and-durations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Events and Durations</h3>
<p>Use user requests as probes. A user's perception of a system being up or down depends on the response they receive when interacting with it. Successful == up, unsuccessful == down</p>
<p>If there is <em>any</em> chance that a user may perceive a failure, consider it as a failure.</p>
<h3><a class="anchor" aria-hidden="true" id="challenges-with-user-uptime"></a><a href="#challenges-with-user-uptime" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Challenges with User Uptime</h3>
<p>How would you label duration as up or down?<br>
How do you address if users are active or not?</p>
<h4><a class="anchor" aria-hidden="true" id="labeling-durations"></a><a href="#labeling-durations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Labeling Durations</h4>
<p>If back to back events differ, there are 3 choices for labels:</p>
<ol>
<li>After a successful (failed) operation, assume the system is up (down) until the user sees evidence to indicate otherwise</li>
<li>Before a successful (failed) operation, assume the system is up (down) until the previous event</li>
<li>Split the duration between events. Half the time us uptime and half the time is downtime</li>
</ol>
<h4><a class="anchor" aria-hidden="true" id="active-and-inactive-periods"></a><a href="#active-and-inactive-periods" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Active and Inactive Periods</h4>
<p>Cutoff Duration - if a user has been inactive for more than the specified (cutoff) duration, consider the user as inactive and stop recording uptime and downtime for that user.</p>
<p>Definition (uptime, downtime): A segment between two consecutive events originating from the same user is:</p>
<ul>
<li>inactive if the two events are further apart than the cutoff duration</li>
<li>uptime if the first of the two events was successful</li>
<li>downtime if the first of the two events was unsuccessful (failed)</li>
</ul>
<p>For each user and a measurement period of interest, uptime is the sum of lengths of uptime segments and downtime is the sum of lengths of downtime segments.</p>
<h2><a class="anchor" aria-hidden="true" id="actionable-availability-windowed-user-uptime"></a><a href="#actionable-availability-windowed-user-uptime" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Actionable Availability: Windowed User Uptime</h2>
<p>Monthly or quarterly availability reporting does not distinguish between a system that routinely fails a small percentage of requests from a system where failures are rare, but experience longer outages.<br>
To distinguish long outages from shorter, more frequent outages, the timescale of outages must be looked at.<br>
Windowed User Uptime addresses that by combining information from all timescales simultaneously.</p>
<h3><a class="anchor" aria-hidden="true" id="calculating-windowed-user-uptime"></a><a href="#calculating-windowed-user-uptime" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Calculating Windowed User Uptime</h3>
<p>Windowed User Uptime iterates over all time windows fully included in the period of interest and it computes availability score for each window size. The score for a window size w is the availability of the <em>worst</em> window size w in the period of interest. Availability for a particular window from t1 to t2 is calculated as follows:</p>
<p>A(t1,t2) = good service between t1 and t2 / total service between t1 and t2</p>
<p>To obtain the score for a window size w, enumerate all windows of duration w and compute the availability for each of them and take the lowest value. The result is a score for each window size. This score is the Minimal Cumulative Ratio (MCR).</p>
<p>MCR = Minimal Cumulative Ratio</p>
<p>MCR picks the worst availability for each window size because that is the window that had the most impact on overall availability.</p>
<h3><a class="anchor" aria-hidden="true" id="monotonicity-https-enwikipediaorg-wiki-monotonic_function-with-integer-multiple-sized-windows"></a><a href="#monotonicity-https-enwikipediaorg-wiki-monotonic_function-with-integer-multiple-sized-windows" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="https://en.wikipedia.org/wiki/Monotonic_function">Monotonicity</a> with Integer Multiple-Sized Windows</h3>
<p>Expect larger windows to have better availability.</p>
<h3><a class="anchor" aria-hidden="true" id="monotonicity-https-enwikipediaorg-wiki-monotonic_function-in-the-general-case"></a><a href="#monotonicity-https-enwikipediaorg-wiki-monotonic_function-in-the-general-case" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="https://en.wikipedia.org/wiki/Monotonic_function">Monotonicity</a> in the General Case</h3>
<p>The worst availability of a day is always better than the worst availability of an hour or of a minute.</p>
<h2><a class="anchor" aria-hidden="true" id="evaluation"></a><a href="#evaluation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Evaluation</h2>
<h3><a class="anchor" aria-hidden="true" id="availability-due-to-hyperactive-users"></a><a href="#availability-due-to-hyperactive-users" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Availability Due to Hyperactive Users</h3>
<p>Bias due to hyper active users can negatively affect success-ratio.<br>
When this bias occurs, success-ratio can mislead us towards thinking that an incident is much more or much less severe than it actually is.</p>
<h3><a class="anchor" aria-hidden="true" id="availability-and-hyper-active-retries"></a><a href="#availability-and-hyper-active-retries" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Availability and Hyper Active Retries</h3>
<p>Retries can drive success ratio down even though only a small number of users are impacted.<br>
Users (and the clients they use) may behave differently during incidents than during normal operations.</p>
<ul>
<li>Clients may make many more requests during incidents or they may just decide to give up on the system and try few hours later. In both cases, success-ratio over or under estimates the magnitude of an outage while user-uptime matches user perception.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="quantifying-impact-of-outages"></a><a href="#quantifying-impact-of-outages" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Quantifying Impact of Outages</h3>
<p>When using success ratio, quantifying the impact of an outage is difficult because it is not based on time.<br>
Seconds of downtime, which we compute as part of user uptime, provides more insight. From there we see the minutes of downtime that our users experience.</p>
<h3><a class="anchor" aria-hidden="true" id="combining-user-uptime-and-success-ratio"></a><a href="#combining-user-uptime-and-success-ratio" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Combining User Uptime and Success Ratio</h3>
<p>Sometimes, combining user-uptime with success-ratio yields valuable insights.</p>
<h3><a class="anchor" aria-hidden="true" id="windowed-uptime-causes-burstiness-of-unavailability"></a><a href="#windowed-uptime-causes-burstiness-of-unavailability" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Windowed Uptime Causes Burstiness of Unavailability</h3>
<p>When looking at availability metrics aggregated over longer periods of time, it is difficult to see short periods of poor availability.<br>
Teams can use windowed user uptime to identify root-cause and then fix the sources of these shorter episodes, improving overall availability.</p>
<h2><a class="anchor" aria-hidden="true" id="applicability-of-windowed-user-uptime"></a><a href="#applicability-of-windowed-user-uptime" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Applicability of Windowed User Uptime</h2>
<p>To calculate windowed user-uptime, fine-grained logs of individual user operations are required. These logs must include a key that enables chaining together operations for each user, the timestamp of the operation, and the status of each operation (success or failure).</p>
<p>In the simplest case, retaining the cumulative count of up and down minutes for each minute is needed to calculate windowed user-uptime over any time duration.</p>
<h2><a class="anchor" aria-hidden="true" id="conclusion"></a><a href="#conclusion" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conclusion</h2>
<p>User Uptime combines the advantages of per-user aggregation with those of using a time-based availability measure.</p>
<p>User Uptime avoids multiple kinds of bias: hyper-active users contribute similarly to the metric as regular users, and even behavioral changes during an outage result in a proportional and meaningful measurement that in many cases is even more precise than success-ratio.</p>
<p>windowed availability allows for the study of multiple time-scales from single minutes to a full quarter in an easy to understand graph.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/documentation/docs/sre/sre-index.html"><span class="arrow-prev">← </span><span>SRE</span></a><a class="docs-next button" href="/documentation/docs/sre/new-relic-sre.html"><span>New Relic SRE</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#abstract">Abstract</a></li><li><a href="#related-work">Related Work</a></li><li><a href="#motivation">Motivation</a><ul class="toc-headings"><li><a href="#time-based-availability-metrics">Time based availability metrics</a></li><li><a href="#count-based-availability-metrics">Count-based availability metrics</a></li><li><a href="#probes">Probes</a></li><li><a href="#actionable-metrics">Actionable metrics</a></li></ul></li><li><a href="#proportional-and-meaningful-availability-user-uptime">Proportional and Meaningful Availability: User-Uptime</a><ul class="toc-headings"><li><a href="#events-and-durations">Events and Durations</a></li><li><a href="#challenges-with-user-uptime">Challenges with User Uptime</a></li></ul></li><li><a href="#actionable-availability-windowed-user-uptime">Actionable Availability: Windowed User Uptime</a><ul class="toc-headings"><li><a href="#calculating-windowed-user-uptime">Calculating Windowed User Uptime</a></li><li><a href="#monotonicity-with-integer-multiple-sized-windows"><a href="https://en.wikipedia.org/wiki/Monotonic_function">Monotonicity</a> with Integer Multiple-Sized Windows</a></li><li><a href="#monotonicity-in-the-general-case"><a href="https://en.wikipedia.org/wiki/Monotonic_function">Monotonicity</a> in the General Case</a></li></ul></li><li><a href="#evaluation">Evaluation</a><ul class="toc-headings"><li><a href="#availability-due-to-hyperactive-users">Availability Due to Hyperactive Users</a></li><li><a href="#availability-and-hyper-active-retries">Availability and Hyper Active Retries</a></li><li><a href="#quantifying-impact-of-outages">Quantifying Impact of Outages</a></li><li><a href="#combining-user-uptime-and-success-ratio">Combining User Uptime and Success Ratio</a></li><li><a href="#windowed-uptime-causes-burstiness-of-unavailability">Windowed Uptime Causes Burstiness of Unavailability</a></li></ul></li><li><a href="#applicability-of-windowed-user-uptime">Applicability of Windowed User Uptime</a></li><li><a href="#conclusion">Conclusion</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="copyright">Copyright © 2020 Greg Schullo</section></footer></div></body></html>